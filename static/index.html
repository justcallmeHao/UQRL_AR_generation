<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>UQRL AR Image Tracker</title>

  <!-- AR.js Image Tracking -->
  <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1.6.0/dist/aframe-master.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

  <!-- Style -->
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>

  <div id="branding-banner">UQRL AR Viewer</div>

  <!-- Upload Form Section -->
  <section class="upload-section">
    <h2>Create Your Own Image Marker</h2>
    <form action="/generate-nft-marker/" method="post" enctype="multipart/form-data" class="upload-form">
      <input type="text" name="marker_name" placeholder="Marker name" required />
      <input type="file" name="image" accept="image/*" required />
      <button type="submit">Upload & Generate Marker</button>
    </form>
    <p>After uploading, refresh this page and hold your image target in front of the camera.</p>
  </section>

  <!-- Loader for AR.js -->
  <div class="arjs-loader">
    <div>Loading camera and AR systemâ€¦</div>
  </div>

  <!-- AR Scene -->
  <a-scene
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true; precision: medium;"
    embedded
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
  >

    <!-- Replace 'poster' with your actual marker_name -->
    <a-nft
      type="nft"
      url="/static/descriptors/poster/poster"
      smooth="true"
      smoothCount="10"
      smoothTolerance="0.01"
      smoothThreshold="5"
    >
      <a-entity
        gltf-model="/static/models/animated_model.glb"
        animation-mixer
        scale="5 5 5"
        position="0 0 0"
      ></a-entity>
    </a-nft>

    <a-entity camera></a-entity>
  </a-scene>
</body>
</html>
